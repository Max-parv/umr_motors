{% extends "base.html" %} {% block content %}

<h2 class="mb-4">Admin Dashboard</h2>

<!-- ================= MAIN STATS ================= -->
<div class="row g-4 mb-4">
  <div class="col-md-3">
    <div class="card shadow-sm text-center p-4">
      <h6>Total Bookings</h6>
      <h2 class="fw-bold">{{ total }}</h2>
    </div>
  </div>

  <div class="col-md-3">
    <div class="card shadow-sm text-center p-4 bg-danger bg-opacity-10">
      <h6 class="text-danger">Pending</h6>
      <h2 class="fw-bold text-danger">{{ pending }}</h2>
    </div>
  </div>

  <div class="col-md-3">
    <div class="card shadow-sm text-center p-4 bg-warning bg-opacity-10">
      <h6 class="text-warning">In Progress</h6>
      <h2 class="fw-bold text-warning">{{ in_progress }}</h2>
    </div>
  </div>

  <div class="col-md-3">
    <div class="card shadow-sm text-center p-4 bg-success bg-opacity-10">
      <h6 class="text-success">Completed</h6>
      <h2 class="fw-bold text-success">{{ completed }}</h2>
    </div>
  </div>
</div>

<!-- ================= REVENUE ================= -->
<h5 class="mb-3">Revenue Overview</h5>

<div class="row g-4 mb-5">
  <div class="col-md-6">
    <div class="card shadow-sm text-center p-4">
      <h6>Total Revenue</h6>
      <h2 class="fw-bold text-success">₹ {{ total_revenue }}</h2>
    </div>
  </div>

  <div class="col-md-6">
    <div class="card shadow-sm text-center p-4">
      <h6>Today's Revenue</h6>
      <h2 class="fw-bold text-success">₹ {{ today_revenue }}</h2>
    </div>
  </div>
</div>

<!-- ================= TODAY STATS ================= -->
<h5 class="mb-3">Today's Performance</h5>

<div class="row g-4 mb-5">
  <div class="col-md-6">
    <div class="card shadow-sm text-center p-4">
      <h6>Today's Bookings</h6>
      <h2 class="fw-bold">{{ today_total }}</h2>
    </div>
  </div>

  <div class="col-md-6">
    <div class="card shadow-sm text-center p-4">
      <h6>Completed Today</h6>
      <h2 class="fw-bold text-success">{{ today_completed }}</h2>
    </div>
  </div>
</div>

<!-- ================= RECENT BOOKINGS ================= -->
<div class="card shadow-sm">
  <div class="card-header bg-white">
    <h5 class="mb-0">Recent Bookings</h5>
  </div>

  <div class="card-body">
    <table class="table align-middle">
      <thead class="table-light">
        <tr>
          <th>Name</th>
          <th>Vehicle</th>
          <th>Status</th>
          <th>Amount</th>
          <th>Date</th>
        </tr>
      </thead>

      <tbody>
        {% for booking in recent_bookings %}
        <tr>
          <td>{{ booking.name }}</td>
          <td>{{ booking.registration_number }}</td>

          <td>
            {% if booking.status == "Pending" %}
            <span class="badge bg-danger">Pending</span>
            {% elif booking.status == "In Progress" %}
            <span class="badge bg-warning text-dark">In Progress</span>
            {% else %}
            <span class="badge bg-success">Completed</span>
            {% endif %}
          </td>

          <td>
            {% if booking.final_amount %} ₹ {{ booking.final_amount }} {% else
            %}
            <span class="text-muted">Not Set</span>
            {% endif %}
          </td>

          <td>{{ booking.booking_date|date:"d M Y H:i" }}</td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="5" class="text-center">No bookings yet.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

{% endblock %}
